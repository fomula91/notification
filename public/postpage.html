<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>post page</title>
</head>
<body>
    <p>post page</p>
    <form id="postform">
        <div>
            <label for="subject">제목</label>
            <input type="text" id="subject" name="subject" required>
        </div>
        <div>
            <label for="content">내용:</label>
            <textarea name="content" id="content" cols="30" rows="10" required></textarea>
        </div>
        <input type="submit" value="제출">
    </form>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        const form = document.getElementById('postform')
        form.addEventListener('submit', async (e) => {
            e.preventDefault()

            const subject = document.getElementById('subject').value
            const content = document.getElementById('content').value
            const accessToken = localStorage.getItem('access_token')

            try {
                const response = await axios.post('/post', {
                    subject: subject,
                    content: content
                }, {
                    headers: {
                        'Authorization': 'Bearer ' + accessToken
                    }
                })
                console.log(response.data)
                alert('성공적으로 게시 되었습니다.')
            } catch (e) {
                console.log('Error posting data: ', e)
                alert('게시 중 오류가 발생하였습니다.')
            }
        })
    </script>
</body>
</html>
